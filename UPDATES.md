# Nightfall Defenders: Recent Updates

## Day/Night Cycle System
- **Dynamic Lighting**: Realistic lighting changes reflecting time of day (dawn, day, dusk, night, midnight)
- **Environmental Effects**: Atmospheric fog and visibility changes based on time of day
- **Gameplay Impact**: Increased enemy spawns and strength during nighttime
- **Enemy Visibility**: Enemies have reduced detection range at night, making stealth approaches viable
- **Visual Indicators**: Sun/moon position and color changes to convey time
- **Adjustable Cycle**: Configurable day length and time scale for testing
- **Strategic Gameplay**: Forces players to prepare for more dangerous night combat
- **Debug Display**: Visual time indicator and time controls in debug mode

## Enemy Psychological System
- **Confidence Levels**: Enemies now react differently based on player power (normal, hesitant, fearful, terrified, subservient)
- **Dynamic Behavior**: Enemies may flee, pause before attacking, or even become allies depending on their psychological state
- **Power Calculation**: System considers player level, weapon damage, health ratio, and city defense
- **Visual Indicators**: Color-coded indicators and labels show enemy psychological state in debug mode
- **Subservient Enemies**: Powerful players can turn enemies into allies that attack other enemies
- **Proximity Effects**: Psychological impact increases when player is closer to enemies

## City Management System
- **Building Construction**: Build and manage different structures to defend your city
- **Strategic Placement**: Tactical placement of buildings for optimal defense
- **Building Categories**: Defense, resource, production, and support structures
- **City Defense**: Watchtowers and walls for early warning and protection
- **Resource Production**: Farms produce food to sustain your city and defenders
- **Progression System**: City level increases with experience, expanding boundaries
- **Building UI**: Intuitive interface for constructing and managing buildings

## Core Combat System Enhancements
- **Health Bar Display**: Enemies now display health bars when damaged
- **Resource Drops**: Enemies drop resources and experience when defeated
- **Enhanced Projectiles**: Different projectile types with varying damage values
- **Experience System**: Players gain XP from defeated enemies
- **Leveling System**: Level up to increase stats and weapon damage

## Crafting System
- **Crafting Recipes**: Added 5 types of upgrades (weapon damage, attack speed, health, stamina, movement speed)
- **Resource Usage**: Requires gathered resources (wood, stone, crystal, herb)
- **Tiered Upgrades**: Each upgrade has 5 levels with increasing benefits and costs
- **UI Interface**: Interactive crafting menu shows available upgrades and costs
- **Crafting Bench**: Physical object in the world to interact with for crafting

## Relic System
- **Unique Effects**: Special items that modify player stats and abilities in interesting ways
- **Rarity Tiers**: Common, uncommon, rare, and legendary relics with varying power levels
- **Trade-offs**: Each relic provides benefits with corresponding drawbacks to balance gameplay
- **Special Mechanics**: Life steal, random stat fluctuations, damage reduction, and more
- **UI Management**: Interface for viewing and managing active relics (max 3 at once)

## World Interaction
- **Interactable Objects**: Added proper interaction with world objects
- **Resource Gathering**: Enhanced resource gathering with messaging and tracking
- **Message System**: Added on-screen messages for events like crafting and gathering
- **City Boundaries**: Visual indicators of city perimeter and expansion with leveling

## UI Improvements
- **Debug Info**: Enhanced debug display showing player stats, inventory, and upgrades
- **Help Text**: Updated control information
- **Inventory Display**: Shows gathered resources and their counts
- **Prompts**: Visual prompts for interacting with objects
- **Building Interface**: Categorized building selection with cost and benefit information

## Game Experience
- **Progressive Difficulty**: As the player levels up, they can take on more difficult enemies
- **Resource Management**: Players need to gather specific materials for crafting and building
- **Upgrade Path**: Strategic upgrade choices (weapon damage vs speed, etc.)
- **Build Diversity**: Relics provide ways to customize playstyle and character builds
- **City Development**: Expanding and improving your city provides strategic advantages
- **Defender Management**: Train defenders to help protect your city from enemy attacks

## Technical Changes
- **Entity Management**: Enhanced entity system for interactable objects and buildings
- **State Management**: Added game pausing functionality
- **Message System**: Centralized message display system
- **Resource Tracking**: Tracking of resources collected
- **Stat Modification**: Systems for applying and removing stat modifiers from relics and buildings
- **City Mechanics**: Systems for city growth, building construction, and defense coordination 